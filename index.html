<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>×“×™×•×•×— ×™×•××™ - ××—×¨××™×ª ×§×•× ×“×™×˜×•×¨×™×”</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #fc694b 0%, #ffc243 100%);
  padding: 20px;
  min-height: 100vh;
}
.container {
  max-width: 600px;
  margin: 0 auto;
  background: white;
  border-radius: 20px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  overflow: hidden;
}
.header {
  background: linear-gradient(135deg, #fc694b 0%, #ffc243 100%);
  padding: 30px;
  text-align: center;
  color: white;
}
.logo {
  width: 80px;
  height: 80px;
  background: white;
  border-radius: 50%;
  margin: 0 auto 15px;
  padding: 8px;
  box-shadow: 0 5px 20px rgba(0,0,0,0.2);
}
.logo img { width: 100%; height: 100%; object-fit: contain; }
.header h1 { font-size: 28px; margin-bottom: 5px; }
.header p { font-size: 16px; opacity: 0.9; }
.form-content { padding: 30px; }
.form-group { margin-bottom: 25px; }
label { display: block; font-weight: 600; color: #fc694b; margin-bottom: 8px; font-size: 15px; }
input[type="text"], input[type="number"], input[type="date"], textarea, select {
  width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 15px; transition: all 0.3s; font-family: inherit;
}
input:focus, textarea:focus, select:focus {
  outline: none; border-color: #ffc243; box-shadow: 0 0 0 3px rgba(255, 194, 67, 0.1);
}
textarea { min-height: 100px; resize: vertical; }
.radio-group { display: flex; gap: 15px; flex-wrap: wrap; }
.radio-item { display: flex; align-items: center; gap: 8px; }
.radio-item input[type="radio"], .product-checkbox { width: 18px; height: 18px; cursor: pointer; }
.product-qty { width: 60px; padding: 5px; margin-left: 5px; }
.submit-btn {
  width: 100%; padding: 15px; background: linear-gradient(135deg, #fc694b 0%, #ffc243 100%);
  color: white; border: none; border-radius: 10px; font-size: 18px; font-weight: 600;
  cursor: pointer; transition: all 0.3s; margin-top: 10px;
}
.submit-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(252, 105, 75, 0.3); }
.submit-btn:active { transform: translateY(0); }
.section-title { font-size: 18px; font-weight: 600; color: #fc694b; margin: 30px 0 15px 0; padding-bottom: 10px; border-bottom: 2px solid #ffc243; }
@media (max-width: 600px) {
  .container { border-radius: 0; }
  .form-content { padding: 20px; }
}
.product-item { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.product-qty:disabled { background: #f0f0f0; }
</style>
</head>
<body>
<div class="container">
<div class="header">
  <div class="logo"><img src="https://d25t2285lxl5rf.cloudfront.net/images/shops/44092.png" alt="Yaffa Knafeh Logo"></div>
  <h1>×“×™×•×•×— ×™×•××™ - ×§×•× ×“×™×˜×•×¨×™×”</h1>
  <p>××—×¨××™×ª ×§×•× ×“×™×˜×•×¨×™×”</p>
</div>

<form class="form-content" id="pastryForm">
  <div class="form-group">
    <label for="date">×ª××¨×™×š ×”×“×™×•×•×— *</label>
    <input type="date" id="date" name="date" required>
  </div>
  <div class="form-group">
    <label for="reporterName">×©× ×”××“×•×•×—×ª *</label>
    <input type="text" id="reporterName" name="reporterName" required placeholder="×”×–×™× ×™ ×©× ××œ×">
  </div>

  <div class="section-title">ğŸ° ××ª×•×§×™× ×©×™×•×¦×¨×• ×”×™×•×</div>
  <div class="form-group" id="productsContainer">

    <!-- Full product list -->
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="dubaiChocolateQty" id="dubaiChocolate">
      <label for="dubaiChocolate">×©×•×§×•×œ×“ ×“×•×‘××™</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="dubaiChocolateQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="dubaiSmallQty" id="dubaiSmall">
      <label for="dubaiSmall">×¢×•×’×ª ×“×•×‘××™ ×§×˜×Ÿ</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="dubaiSmallQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="dubaiLargeQty" id="dubaiLarge">
      <label for="dubaiLarge">×¢×•×’×ª ×“×•×‘××™ ×’×“×•×œ</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="dubaiLargeQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="trlicePersonalQty" id="trlicePersonal">
      <label for="trlicePersonal">×˜×¨×œ×™×¦×” ××™×©×™</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="trlicePersonalQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="trlicePasQty" id="trlicePas">
      <label for="trlicePas">×˜×¨×œ×™×¦×” ×¤×¡</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="trlicePasQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="trliceTrayQty" id="trliceTray">
      <label for="trliceTray">×˜×¨×œ×™×¦×” ××’×©</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="trliceTrayQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="malabiQty" id="malabi">
      <label for="malabi">××œ×‘×™</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="malabiQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="veganMalabiQty" id="veganMalabi">
      <label for="veganMalabi">××œ×‘×™ ×˜×‘×¢×•× ×™</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="veganMalabiQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="lilotBeirutQty" id="lilotBeirut">
      <label for="lilotBeirut">×œ×™×œ×•×ª ×‘×™×¨×•×ª</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="lilotBeirutQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="namuraQty" id="namura">
      <label for="namura">× ××•×¨×”</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="namuraQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="pistachioIceQty" id="pistachioIce">
      <label for="pistachioIce">××¨×˜×™×§ ×¤×™×¡×˜×•×§</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="pistachioIceQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="dubaiIceQty" id="dubaiIce">
      <label for="dubaiIce">××¨×˜×™×§ ×“×•×‘××™</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="dubaiIceQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="malabiIceQty" id="malabiIce">
      <label for="malabiIce">××¨×˜×™×§ ××œ×‘×™</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="malabiIceQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="cashewIceQty" id="cashewIce">
      <label for="cashewIce">××¨×˜×™×§ ×§×©×™×•</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="cashewIceQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="milkChocolateSyrupQty" id="milkChocolateSyrup">
      <label for="milkChocolateSyrup">×¡×™×¨×•×¤ ×©×•×§×•×œ×“ ×—×œ×‘</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="milkChocolateSyrupQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="whiteChocolateSyrupQty" id="whiteChocolateSyrup">
      <label for="whiteChocolateSyrup">×¡×™×¨×•×¤ ×©×•×§×•×œ×“ ×œ×‘×Ÿ</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="whiteChocolateSyrupQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="pistachioSyrupQty" id="pistachioSyrup">
      <label for="pistachioSyrup">×¡×™×¨×•×¤ ×¤×™×¡×˜×•×§</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="pistachioSyrupQty" disabled>
    </div>
    <div class="product-item">
      <input type="checkbox" class="product-checkbox" data-field="oumiQty" id="oumi">
      <label for="oumi">×× ×¢×œ×™</label>
      ×›××•×ª: <input type="number" min="0" class="product-qty" id="oumiQty" disabled>
    </div>
  </div>

  <!-- rest of the form remains the same -->
  <div class="section-title">ğŸ‚ ×”×–×× ×•×ª ××™×•×—×“×•×ª</div>
  <div class="form-group">
    <label>×”×× ×”×ª×§×‘×œ×• ×”×–×× ×•×ª ××™×•×—×“×•×ª ×”×™×•×? *</label>
    <div class="radio-group">
      <div class="radio-item">
        <input type="radio" id="ordersYes" name="specialOrders" value="×›×Ÿ" required>
        <label for="ordersYes">×›×Ÿ</label>
      </div>
      <div class="radio-item">
        <input type="radio" id="ordersNo" name="specialOrders" value="×œ×" required>
        <label for="ordersNo">×œ×</label>
      </div>
    </div>
  </div>
  <div class="form-group">
    <label for="orderDetails">×¤×¨×˜×™ ×”×”×–×× ×•×ª ×”××™×•×—×“×•×ª</label>
    <textarea id="orderDetails" name="orderDetails" placeholder="×¤×¨×˜×™: ×¡×•×’ ×”×”×–×× ×”, ×ª××¨×™×š ×œ××™×¡×•×£, ×©× ×œ×§×•×—..."></textarea>
  </div>

  <div class="section-title">ğŸ“¦ ×—×•××¨×™ ××¤×™×™×” ×•××œ××™</div>
  <div class="form-group">
    <label for="missingIngredients">×—×•××¨×™ ××¤×™×™×” ×©×—×¡×¨×™× ××• × ×’××¨×•</label>
    <textarea id="missingIngredients" name="missingIngredients" placeholder="×¤×¨×˜×™: ×§××—, ×¡×•×›×¨, ×‘×™×¦×™×, ×—×××”, ×©×•×§×•×œ×“, ×•× ×™×œ, ××‘×§×ª ××¤×™×™×” ×•×›×•'"></textarea>
  </div>
  <div class="form-group">
    <label for="ingredientsOrdered">×—×•××¨×™× ×©×”×•×–×× ×• ×”×™×•×</label>
    <textarea id="ingredientsOrdered" name="ingredientsOrdered" placeholder="×¤×¨×˜×™ ×”×–×× ×•×ª..."></textarea>
  </div>

  <div class="section-title">âš ï¸ ×ª×§×œ×•×ª ×•×¦×™×•×“</div>
  <div class="form-group">
    <label>×”×× ×”×™×• ×ª×§×œ×•×ª ×‘×ª× ×•×¨×™×/×¦×™×•×“ ××¤×™×™×”? *</label>
    <div class="radio-group">
      <div class="radio-item">
        <input type="radio" id="malfunctionYes" name="malfunctions" value="×›×Ÿ" required>
        <label for="malfunctionYes">×›×Ÿ</label>
      </div>
      <div class="radio-item">
        <input type="radio" id="malfunctionNo" name="malfunctions" value="×œ×" required>
        <label for="malfunctionNo">×œ×</label>
      </div>
    </div>
  </div>
  <div class="form-group">
    <label for="malfunctionDetails">×¤×¨×˜×™ ×”×ª×§×œ×•×ª</label>
    <textarea id="malfunctionDetails" name="malfunctionDetails" placeholder="××™×–×” ×¦×™×•×“, ××” ×”×‘×¢×™×”, ×”×× ×ª×•×§×Ÿ..."></textarea>
  </div>

  <div class="section-title">âœ¨ ××™×›×•×ª ×”××•×¦×¨×™×</div>
  <div class="form-group">
    <label>×”×× ×”×™×• ×‘×¢×™×•×ª ×‘××™×›×•×ª ×”××ª×•×§×™×? *</label>
    <div class="radio-group">
      <div class="radio-item">
        <input type="radio" id="qualityYes" name="qualityIssues" value="×›×Ÿ" required>
        <label for="qualityYes">×›×Ÿ</label>
      </div>
      <div class="radio-item">
        <input type="radio" id="qualityNo" name="qualityIssues" value="×œ×" required>
        <label for="qualityNo">×œ×</label>
      </div>
    </div>
  </div>
  <div class="form-group">
    <label for="qualityDetails">×¤×¨×˜×™ ×‘×¢×™×•×ª ××™×›×•×ª</label>
    <textarea id="qualityDetails" name="qualityDetails" placeholder="××” ×”×‘×¢×™×”, ×‘××™×–×” ××•×¦×¨, ×”×× × ×¤×¡×œ..."></textarea>
  </div>

  <div class="section-title">ğŸ‘¥ × ×•×›×—×•×ª ×¦×•×•×ª</div>
  <div class="form-group">
    <label for="staffPresent">××¡×¤×¨ ×¢×•×‘×“×•×ª ×©×”×™×• ×”×™×•× *</label>
    <input type="number" id="staffPresent" name="staffPresent" min="0" required>
  </div>
  <div class="form-group">
    <label>×”×× ×”×™×• ×¢×•×‘×“×•×ª × ×¢×“×¨×•×ª? *</label>
    <div class="radio-group">
      <div class="radio-item">
        <input type="radio" id="absentYes" name="absentees" value="×›×Ÿ" required>
        <label for="absentYes">×›×Ÿ</label>
      </div>
      <div class="radio-item">
        <input type="radio" id="absentNo" name="absentees" value="×œ×" required>
        <label for="absentNo">×œ×</label>
      </div>
    </div>
  </div>
  <div class="form-group">
    <label for="absentDetails">×¤×¨×˜×™ ×”×¢×“×¨×•×™×•×ª</label>
    <textarea id="absentDetails" name="absentDetails" placeholder="×©××•×ª, ×¡×™×‘×” ×× ×™×“×•×¢×”..."></textarea>
  </div>

  <div class="section-title">ğŸ’¬ ×”×¢×¨×•×ª ×•×”××œ×¦×•×ª</div>
  <div class="form-group">
    <label for="generalNotes">×”×¢×¨×•×ª ×›×œ×œ×™×•×ª</label>
    <textarea id="generalNotes" name="generalNotes" placeholder="×”×¢×¨×•×ª, ×”××œ×¦×•×ª ×œ×©×™×¤×•×¨, ××• ×›×œ ××™×“×¢ ×¨×œ×•×•× ×˜×™ ××—×¨..."></textarea>
  </div>

  <button type="submit" class="submit-btn">ğŸ“¤ ×©×œ×—×™ ×“×™×•×•×—</button>
</form>
</div>

<script>
const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwkEiNsswZx6LhrPn7cNj3NMUD-n4MLqpCjn4Tdvewrcdh1QDTPXyr7tDli8MBFTmyl0A/exec';

// Set today's date
document.getElementById('date').valueAsDate = new Date();

// Enable/disable quantity inputs when checkbox is toggled
document.querySelectorAll('.product-checkbox').forEach(cb => {
    const qtyInput = document.getElementById(cb.dataset.field);
    cb.addEventListener('change', () => {
        qtyInput.disabled = !cb.checked;
        if(!cb.checked) qtyInput.value = '';
    });
});

document.getElementById('pastryForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const submitBtn = this.querySelector('.submit-btn');
    submitBtn.textContent = 'â³ ×©×•×œ×—...';
    submitBtn.disabled = true;

    const data = { formType: 'pastry' };

    // Collect each sweet individually
    document.querySelectorAll('#productsContainer .product-item').forEach(p => {
        const checkbox = p.querySelector('input[type="checkbox"]');
        const qtyInput = p.querySelector('input[type="number"]');
        const fieldName = qtyInput.id; // send each quantity individually
        data[fieldName] = checkbox.checked ? (qtyInput.value || 0) : 0;
    });

    // Collect rest of the form data
    new FormData(this).forEach((value, key) => {
        if (!key.endsWith('Qty') && key !== 'product-checkbox') {
            data[key] = value;
        }
    });

    // Send data via hidden form to Google Apps Script
    const iframe = document.createElement('iframe');
    iframe.style.display = 'none';
    iframe.name = 'hidden_iframe';
    document.body.appendChild(iframe);

    const hiddenForm = document.createElement('form');
    hiddenForm.target = 'hidden_iframe';
    hiddenForm.method = 'POST';
    hiddenForm.action = SCRIPT_URL;

    const input = document.createElement('input');
    input.type = 'hidden';
    input.name = 'data';
    input.value = JSON.stringify(data);
    hiddenForm.appendChild(input);

    document.body.appendChild(hiddenForm);
    hiddenForm.submit();

    setTimeout(() => {
        alert('âœ… ×”×“×™×•×•×— × ×©×œ×— ×‘×”×¦×œ×—×”!\n\n×”× ×ª×•× ×™× × ×©××¨×• ×‘×’×™×œ×™×•×Ÿ "×§×•× ×“×™×˜×•×¨×™×”" ×‘-Google Sheets.');
        this.reset();
        document.getElementById('date').valueAsDate = new Date();
        // reset quantities and checkboxes
        document.querySelectorAll('#productsContainer .product-item').forEach(p => {
            const checkbox = p.querySelector('input[type="checkbox"]');
            const qtyInput = p.querySelector('input[type="number"]');
            checkbox.checked = false;
            qtyInput.value = '';
            qtyInput.disabled = true;
        });
        submitBtn.textContent = 'ğŸ“¤ ×©×œ×—×™ ×“×™×•×•×—';
        submitBtn.disabled = false;
        document.body.removeChild(hiddenForm);
        document.body.removeChild(iframe);
    }, 1200);
});
</script>
</body>
</html>
